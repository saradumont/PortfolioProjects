---
title: 'Google Analytics Capstone: Bellabeats'
author: "Sara"
date: "2022-08-22"
output:
  html_document: default
  pdf_document: default
---
### The following information is from Google Analytics Certificate Program Case Study 2

## Scenario
I am  junior data analyst working to a team of marketing analysts at Bellabeat.  The stakeholders would like  an analysis of data from fitness trackers to find   insights about how people are using their fitness trackers. They will use this    information to guide a marketing strategy for Bellabeat.
  
  
## Company
  "Urška Sršen and Sando Mur founded Bellabeat, a high-tech company that             manufactures health-focused smart products. Sršen used her background as an       artist to develop beautifully designed technology that informs and inspires       women around the world. Collecting data on activity, sleep, stress, and           reproductive health has allowed Bellabeat to empower women with knowledge about    their own health and habits." 
  
## **Products**
 
- **Bellabeat app:** The Bellabeat app provides users with health data related to their activity, sleep, stress, menstrual cycle,  mindfulness and wellness habits.

- **Leaf:** This wellness tracker can be worn as a bracelet, necklace, or clip; which then connects to the Bellabeat app to track activity, sleep, and stress.

- **Time:**  This wellness watch uses smart technology to track user activity, sleep, and stress; and connects to the Bellabeat app to provide you with insights into your daily wellness.

- **Spring:**  This is a water bottle that tracks daily water intake. It connects to the Bellabeat app to track your hydration levels.



# **Buisness task**

- **Establish** new growth for the company **by** identifying trends in how fitness trackers data **to** create a marketing strategy.
  
# Stakeholders

- **Urška Sršen:** Bellabeat’s cofounder and Chief Creative Officer 
- **Sando Mur:** Mathematician and Bellabeat’s cofounder
  
# Data
"This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. Individual reports can be parsed by export session ID (column A) or timestamp (column B). Variation between output represents use of different types of Fitbit trackers and individual tracking behaviors / preferences." As per link: <https://www.kaggle.com/datasets/arashnic/fitbit> if you would like more information please refer to link.
I did try and find other datasets to make my analysis more accurate. I was unable to find any more fitness tracker data.  Although not current this data is reliable. It is a Public dataset so there is any privacy issues if there was I would change/hide or lock user information. 

# **Setting up R and loading Data set**
Notes: Installed packages needed in R for analysis

install.packages(c("rmarkdown","skimr","tidyverse","janitor","lubridate"))

```{r warning=FALSE}
library(rmarkdown)
library(skimr)
library(tidyverse)
library(janitor)
library(lubridate)
```

## **Import Data**

```{r warning=FALSE}
daily_activity <- read_csv("dailyActivity_merged.csv")
hr_seconds <- read_csv("heartrate_seconds_merged.csv")
sleep_day <- read_csv("sleepDay_merged.csv")
```

## **Review Data**
```{r warning=FALSE}
str(daily_activity)
```
```{r warning=FALSE}
str(hr_seconds)

```
```{r warning=FALSE}
str(sleep_day)
```

## **Clean Data And Validate**
Ensure column names are clean.
```{r warning=FALSE}
clean_names(daily_activity)
clean_names(hr_seconds)
clean_names(sleep_day)
```


## **Find Missing Values**

```{r warning=FALSE}
is.null(daily_activity)
is.null(hr_seconds)
is.null(sleep_day)
```


## **Find DUplictate Data**

```{r warning=FALSE}
sum(duplicated(daily_activity))
sum(duplicated(sleep_day))
sum(duplicated(hr_seconds))

```
3 Duplicates found in sleep_day data

## **Remove Duplicate Data**
```{r warning=FALSE}
sleep_day<- unique(sleep_day)
```

# **Recheck for Duplicates**
```{r warning=FALSE}
sum(duplicated(sleep_day))
```
## **Check Length(number of Users) for data**

```{r warning=FALSE}
length(unique(daily_activity$Id))
length(unique(hr_seconds$Id))
length(unique(sleep_day$Id))
```

## **Fix any inconsistancies, manipulate data to find relevant information and combine data**
### **Change dates to standard format**

```{r warning=FALSE}
daily_activity$ActivityDate = as.POSIXct(daily_activity$ActivityDate,tz=Sys.timezone(),format="%m/%d/%Y")

hr_seconds$Time = as.POSIXct(hr_seconds$Time,tz=Sys.timezone(),format="%m/%d/%Y")

sleep_day$SleepDay = as.POSIXct(sleep_day$SleepDay ,tx=Sys.timezone(), format = "%m/%d/%Y ")

hr_seconds$Time = format(hr_seconds$Time,format='%Y/%m/%d')
```


### **Rename SleepDay to Activity Date and Combine**
```{r warning=FALSE}
sleep_day$minNotAsleep = (sleep_day$TotalTimeInBed - sleep_day$TotalMinutesAsleep)

sleep_day$hoursSleep = (sleep_day$TotalMinutesAsleep / 60) 
sleep_day$hoursSleep = round(sleep_day$hoursSleep,digits = 1)
```


### **Rename the Time column to ActiveDate to be consistent with other data**
```{r warning=FALSE}
sleep_day <- rename(sleep_day,ActivityDate=SleepDay)

daily_activity_1 <- merge(daily_activity,sleep_day, by=c("Id","ActivityDate"))


```

### **Find the daily maximum,minimum and average heart rate and round average to the nearest whole number**
```{r warning=FALSE}
hr_seconds_sum <- hr_seconds %>%
  group_by(Id,Time) %>%
  summarize(MaxHeartRate = max(Value,na.rm=T),
            MinHeartRate = min(Value,na.rm=T),
            AvgHeartRate = mean(Value,na.rm=T)) %>%
           arrange(Id,Time)

 hr_seconds_sum$AvgHeartRate = round(hr_seconds_sum$AvgHeartRate,digits = 0)
```
### **Rename the Time column to ActiveDate to be consistent with other data** 
```{r warning=FALSE}
hr_seconds_sum <- rename(hr_seconds_sum,ActivityDate=Time)

daily_activity_all <- merge(daily_activity_1,hr_seconds_sum, by=c("Id","ActivityDate"))

```


### **Calculate toalta active minutes and combine data**
```{r warning=FALSE}
daily_activity_all <- daily_activity_all %>%
   mutate(TotalActiveMinutes = rowSums(across(c(VeryActiveMinutes,FairlyActiveMinutes,LightlyActiveMinutes))))

View(daily_activity_all)
```

Now all my data has been cleaned and double checked.

# **Analysis** 

### **Review Summaries** 
```{r warning=FALSE}
daily_activity_all %>%
select(TotalSteps, TotalDistance,TotalActiveMinutes,hoursSleep,minNotAsleep,MinHeartRate,MaxHeartRate,AvgHeartRate,SedentaryMinutes) %>%
  summary()
  
```
From this summary, consumers are meeting an average of 8522 steps a day. Havard Health suggests that there is benefit for meeting a 7500 step goal a day.   (link)<https://www.health.harvard.edu/staying-healthy/how-many-steps-should-i-take-each-day>. The cdc recommends getting more the 7 hours or more of sleep a night the mean is 7  (link)<https://www.cdc.gov/sleep/about_sleep/how_much_sleep.html> There is relevant information about the highest daily heart rate but the the maxium is bordering out of normal range and the highest average heart rate is also above normal range.

## ** PLot Data
Review the correlation between daily steps taken and calories burned.
```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=TotalSteps,y=Calories,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Step Totals and Calories Burned")

```

Correlation Identified, review if correlation is the same between  with total activity minutes and calories burned.

```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=TotalActiveMinutes,y=Calories,color=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Active Minutes and Calories Burned")
```

Same correlation identified. Analysis any correlation with Calories burned and hours of sleep.
```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=hoursSleep,y=Calories,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between hours of sleep and Calories Burned")
```
Identify if there is any correlation between average heart rate, lowest heart rate and highest heart rate; with calories burned
```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=AvgHeartRate,y=Calories,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Average Heart Rate and Calories Burned")

ggplot(daily_activity_all,aes(x=MaxHeartRate,y=Calories,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Highest Daily Heart Rate and Calories Burned")

ggplot(daily_activity_all,aes(x=MinHeartRate,y=Calories,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Lowest Daily Heart Rate and Calories Burned")
```
From these graphs there is clearly a positive relationship between the amount of steps/active minutes and how many calories are burned. It seems that sleep does not  correlate with the amount of calories burned except in the case hours asleep are greater than 10 then there seems to be less calories burned. There seems to be a positive  correlation  for the amount of calories burned with highest daily heart rate until about 162 beats per minutes, after that there is a negative correlation. There seems to be a correlation between lowest daily heart rate and calories burned where the lower the lowest the daily heart rate is the more calories burnt.

Identify if there is a correlation between lowest daily heart rate and activity minutes

```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=MinHeartRate,y=TotalActiveMinutes,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Total avtive minutes and Lowest Daily Heart Rate")
```
Correlation not seen.

View relationship between Total steps and lowest daily heart rate


```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=TotalSteps,y=MinHeartRate,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Step Totals and Lowest Daily HeartRrate")
```
Identify if there is a correlation between sleep and lowest average heart rate
```{r warning=FALSE}
ggplot(daily_activity_all,aes(x=MinHeartRate,y=TotalMinutesAsleep,colour=Calories))+
  geom_point()+
  geom_smooth()+
  labs(title = "Relationship Between Lowest Daily Heart Rate and Total Minutes Asleep")
```
No relationship noted.

Identify correlations between minutes in bed
```{r warning=FALSE}
ggplot(data=daily_activity_all) +
  geom_smooth(mapping=aes(x=TotalTimeInBed,y=minNotAsleep)) +
  labs(title="Relationship Between Total Time In Bed and Time Spent Awake In Bed")
 
 
```
Correlation identified between minutes awake in bed and total time in bed.


Graph to determine the amount of hours of sleep individuals averaged.
```{r warning=FALSE}
daily_activity_all %>%
   group_by(Id) %>%
  summarize(Avg = mean(hoursSleep,na.rm=T)) %>%
  ggplot() +
  geom_point(aes(x=Id, y=Avg,color = Avg)) +
  theme(axis.text.x=element_text(angle = 90, vjust = 0.5))
```
Identified that many consumers are not getting the recommended amount of sleep on average.

# **Summary of Analysis**
- Data summary at the beginning of my analysis found some useful information .If this information was calculated on an individual basis it could really give consumers insightful information about their health and ways to improve their health.
There was an obvious connection between total steps - and calories burned, as well as active minutes and calories burned.
There was not a correlation between hours of sleep and calories burned except when total hours slept was over ten hours then there was a negative correlation.
- There was a positive correlation between highest daily heart rate and calories burned until about 162 beats per minute then there was a negative correlation.
- There was a negative correlation between lowest daily heart rate where the higher the lowest daily heart rate was the less calories were burned.
There did not seem to be any correlation between total active minutes and lowest daily heart rate, lowest daily heart rate and minutes asleep or between total steps and lowest daily heart rate
- There was a positive correlation between minutes in bed awake and total minutes in bed. There, the longer people were awake in bed, the longer total time they spent in bed. the same correlation between minutes in bed awake and minutes in bed asleep. It seems the longer time spent in bed not asleep, the more sleep was needed.
- Although my summary earlier suggested consumers averaged about 7 hours  of sleep, individually some consumers were averaging less than 7.


# **Suggestions Based On Analysis**
Suggested  marketing campaign targeted towards using consumers’s individual data to help make suggestions to improve their health. Example: ”you burn more calories on average when you get this much sleep”, “If you get your heart rate up to 162 bpm for this long you will be in peak range for calorie burning, for health benefits you should get at least 7500 calories a day.” The message is that if people purchase and wear the Bellabeat activity tracker and wear  them consistently Bella beat can use their data to help make suggestions to try and help improve your overall health.”

# **Problems with the dataset/analysis**
- The data set was not large enough to come to any valid conclusions about the population as a whole. 
The data did not include information about the individuals such as gender, height, ethnicity, ect..
- The data set did not include how often people were not wearing their activity tracker, likely daily missing data; such as when their devices are being charged. 
- Tracker accuracy unknown, so there could be a discrepancy compared to other tracking methods such as: steps, calories burnt, sleep, ect. was being tracked accurately.
